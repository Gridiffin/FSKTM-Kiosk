<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - FSKTM Kiosk</title>
    <link rel="stylesheet" href="./assets/css/stylescheckout.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header Section -->
    <header>
        <!-- Logo Container -->
        <div id="logo-container">
            <a href="./index.html" id="logo-link">
                <img src="./assets/images/fsktm_logo.png" alt="Website Logo" id="logo">
            </a>
        </div>

        <!-- Centered Text -->
        <div id="header-center-text">
            <h1>FSKTM Kiosk</h1>
        </div>

        <!-- Grouped Navigation Links and Dark Mode Button -->
        <div id="nav-and-dark-mode-container">
            <!-- Home Button (Icon) -->
            <a href="./index.html" id="home-btn" class="icon-btn">
                <i class="fas fa-home"></i>
            </a>

            <!-- Dark Mode Toggle Icon -->
            <button id="dark-mode-btn" class="icon-btn" aria-label="Toggle dark mode">
                <i id="dark-mode-icon" class="fas fa-moon"></i>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Checkout Container -->
        <div class="checkout-container">
            <p id="head1">THANK YOU FOR YOUR PURCHASE!</p>
            <h1 id="head2">RECEIPT</h1>

            <!-- Receipt Section -->
            <div id="receipt">
                <p class="receipt-title">Purchased Items:</p>
                <ul id="purchased-items">
                    <!-- Items will be added dynamically -->
                </ul>

                <div class="total-section">
                    <p class="receipt-title">Total:</p>
                    <p class="total-amount"><span id="total-value">RM0.00</span></p>
                </div>
            </div>

            <!-- Payment Options -->
            <h3>Choose Payment Method</h3>
            <form action="./save_receipt.php" method="POST">
                <div class="payment-option">
                    <input type="radio" id="cash" name="payment_method" value="cash" required>
                    <label for="cash" class="payment-label">
                        <i class="fas fa-money-bill-wave payment-icon"></i>
                        <span>Cash</span>
                    </label>
                </div>
                <div class="payment-option">
                    <input type="radio" id="qr" name="payment_method" value="qr" required>
                    <label for="qr" class="payment-label">
                        <i class="fas fa-qrcode payment-icon"></i>
                        <span>QR Code</span>
                    </label>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-login">Confirm Payment</button>
                </div>
            </form>
        </div>
    </main>

    <!-- Footer Section -->
    <footer id="footer">
        <div class="footer-content">
            <p>&copy; 2024 FSKTM Kiosk. All Rights Reserved. | <a href="./contact.html">Contact Us</a></p>
            <div class="social-media">
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Retrieve cart data from localStorage
        const cart = JSON.parse(localStorage.getItem("cart")) || [];

        // Function to render receipt items
        function renderReceipt() {
            const purchasedItems = document.getElementById("purchased-items");
            const totalValue = document.getElementById("total-value");
            let totalPrice = 0;

            // Clear existing items
            purchasedItems.innerHTML = "";

            // Render each cart item
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                totalPrice += itemTotal;

                const itemElement = document.createElement("li");
                itemElement.innerHTML = `
                    ${item.name} - RM${item.price.toFixed(2)} x ${item.quantity} = RM${itemTotal.toFixed(2)}
                `;
                purchasedItems.appendChild(itemElement);
            });

            // Update total price
            totalValue.textContent = `RM${totalPrice.toFixed(2)}`;
        }

        // Initial render
        renderReceipt();
    </script>
</body>
</html>